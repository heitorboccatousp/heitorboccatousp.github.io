const precosExames = {
    "AAA": {
        "ULTRASSOM FT 412": {
            "US Abdome e Dinamico das Vias Urinarias": 75.5,
            "US Abdome Total": 86.5,
            "US Abdomen Superior": 75.5,
            "US Abdominal Total Com Elastogr": 86.5,
            "US Cervical": 75.5,
            "US Com Doppler Colorido de Arterias Viscera": 140.5,
            "US Craniana": 75.5,
            "US da Bolsa Excrotal Com Dopple": 151,
            "US da Mao": 75.5,
            "US da Tireoide": 75.5,
            "US da Tireoide Com Doppler": 129.5,
            "US das Articulacoes": 75.5,
            "US das Axilas": 75.5,
            "US das Mamas": 75.5,
            "US das Mamas Com Doppler": 129.5,
            "US das Mamas Pediatrico": 75.5,
            "US das Partes Moles": 75.5,
            "US de Antebraco": 75.5,
            "US de Bolsa Escrotal Pediatrico": 75.5,
            "US de Parede Abdominal": 75.5,
            "US Dinamico das Vias Urinarias": 75.5,
            "US do Aparelho Urinario": 75.5,
            "US do Cotovelo": 75.5,
            "US do Escroto": 75.5,
            "US do Joelho": 75.5,
            "US do Ombro": 75.5,
            "US do Pe": 75.5,
            "US do Punho": 75.5,
            "US do Quadril": 75.5,
            "US do Tornozelo": 75.5,
            "Us Doppler Colorido 1 Vaso": 140.5,
            "Us Doppler Colorido 2 Vasos": 140.5,
            "US dos Musculos (Partes Moles)": 75.5,
            "US Globo Ocular": 75.5,
            "US Inguinal": 75.5,
            "US Obstetrica": 75.5,
            "US Obstetrica Com Doppler": 140.5,
            "US Obstetrica Morfologico": 151,
            "US Obstetrico Com Perfil Biofisico": 97,
            "US Obstetrico Com Translucencia Nucal": 108,
            "US Obstetrico de Primeiro Trimestre": 75.5,
            "US Obstetrico Morfologico de 1º": 151,
            "US Pelvico Feminino": 75.5,
            "US Pélvico Transvaginal": 75.5,
            "US Prostata Transretal Com Biopsia": 345.5,
            "US Prostata Via Abdominal": 75.5,
            "US Superficial da Coxa": 75.5,
            "US Superficial da Perna": 75.5,
            "US Superficial do Braco": 75.5,
            "US Superficial do Pescoço": 75.5,
            "US Transvaginal C/ Preparo Intestinal": 75.5


        // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
        },
        "M.A.P.A.": {
            "MAPA 24 Horas": 92
        // Adicione mais exames para o Equipamento2 e o rating A conforme necessário
        },
        "ECG": {
            "ECG - Eletrocardiograma Convencional": 28
        // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
        },
        "Holter": {
            "Holter 24 Horas - 2 Ou Mais Canais": 92
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
        // Adicione mais equipamentos e ratings conforme necessário
    },
    "AA": {
        "ULTRASSOM FT 412": {
            "US Abdome e Dinamico das Vias Urinarias": 80,
    "US Abdome Total": 90,
    "US Abdomen Superior": 80,
    "US Abdominal Total Com Elastogr": 90,
    "US Cervical": 80,
    "US Com Doppler Colorido de Arterias Viscera": 150,
    "US Craniana": 80,
    "US da Bolsa Excrotal Com Dopple": 160,
    "US da Mao": 80,
    "US da Tireoide": 80,
    "US da Tireoide Com Doppler": 140,
    "US das Articulacoes": 80,
    "US das Axilas": 80,
    "US das Mamas": 80,
    "US das Mamas Com Doppler": 140,
    "US das Mamas Pediatrico": 80,
    "US das Partes Moles": 80,
    "US de Antebraco": 80,
    "US de Bolsa Escrotal Pediatrico": 80,
    "US de Parede Abdominal": 80,
    "US Dinamico das Vias Urinarias": 80,
    "US do Aparelho Urinario": 80,
    "US do Cotovelo": 80,
    "US do Escroto": 80,
    "US do Joelho": 80,
    "US do Ombro": 80,
    "US do Pe": 80,
    "US do Punho": 80,
    "US do Quadril": 80,
    "US do Tornozelo": 80,
    "Us Doppler Colorido 1 Vaso": 150,
    "Us Doppler Colorido 2 Vasos": 150,
    "US dos Musculos (Partes Moles)": 80,
    "US Globo Ocular": 80,
    "US Inguinal": 80,
    "US Obstetrica": 80,
    "US Obstetrica Com Doppler": 150,
    "US Obstetrica Morfologico": 160,
    "US Obstetrico Com Perfil Biofisico": 105,
    "US Obstetrico Com Translucencia Nucal": 115,
    "US Obstetrico de Primeiro Trimestre": 80,
    "US Obstetrico Morfologico de 1º": 160,
    "US Pelvico Feminino": 80,
    "US Pélvico Transvaginal": 80,
    "US Prostata Transretal Com Biopsia": 360,
    "US Prostata Via Abdominal": 80,
    "US Superficial da Coxa": 80,
    "US Superficial da Perna": 80,
    "US Superficial do Braco": 80,
    "US Superficial do Pescoço": 80,
    "US Transvaginal C/ Preparo Intestinal": 80
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "M.A.P.A.": {
            "MAPA 24 Horas": 95
            // Adicione mais exames para o Equipamento2 e o rating A conforme necessário
          },
          "ECG": {
            "ECG - Eletrocardiograma Convencional": 30
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "Holter": {
            "Holter 24 Horas - 2 Ou Mais Canais": 95
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
    },
    "A": {
        "ULTRASSOM FT 412": {
            "US Abdome e Dinamico das Vias Urinarias": 85,
            "US Abdome Total": 95,
            "US Abdomen Superior": 85,
            "US Abdominal Total Com Elastogr": 95,
            "US Cervical": 85,
            "US Com Doppler Colorido de Arterias Viscera": 160,
            "US Craniana": 85,
            "US da Bolsa Excrotal Com Dopple": 170,
            "US da Mao": 85,
            "US da Tireoide": 85,
            "US da Tireoide Com Doppler": 150,
            "US das Articulacoes": 85,
            "US das Axilas": 85,
            "US das Mamas": 85,
            "US das Mamas Com Doppler": 150,
            "US das Mamas Pediatrico": 85,
            "US das Partes Moles": 85,
            "US de Antebraco": 85,
            "US de Bolsa Escrotal Pediatrico": 85,
            "US de Parede Abdominal": 85,
            "US Dinamico das Vias Urinarias": 85,
            "US do Aparelho Urinario": 85,
            "US do Cotovelo": 85,
            "US do Escroto": 85,
            "US do Joelho": 85,
            "US do Ombro": 85,
            "US do Pe": 85,
            "US do Punho": 85,
            "US do Quadril": 85,
            "US do Tornozelo": 85,
            "Us Doppler Colorido 1 Vaso": 160,
            "Us Doppler Colorido 2 Vasos": 160,
            "US dos Musculos (Partes Moles)": 85,
            "US Globo Ocular": 85,
            "US Inguinal": 85,
            "US Obstetrica": 85,
            "US Obstetrica Com Doppler": 160,
            "US Obstetrica Morfologico": 170,
            "US Obstetrico Com Perfil Biofisico": 112,
            "US Obstetrico Com Translucencia Nucal": 120,
            "US Obstetrico de Primeiro Trimestre": 85,
            "US Obstetrico Morfologico de 1º": 170,
            "US Pelvico Feminino": 85,
            "US Pélvico Transvaginal": 85,
            "US Prostata Transretal Com Biopsia": 380,
            "US Prostata Via Abdominal": 85,
            "US Superficial da Coxa": 85,
            "US Superficial da Perna": 85,
            "US Superficial do Braco": 85,
            "US Superficial do Pescoço": 85,
            "US Transvaginal C/ Preparo Intestinal": 85
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "M.A.P.A.": {
            "MAPA 24 Horas": 105
            // Adicione mais exames para o Equipamento2 e o rating A conforme necessário
          },
          "ECG": {
            "ECG - Eletrocardiograma Convencional": 33
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "Holter": {
            "Holter 24 Horas - 2 Ou Mais Canais": 105
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
    },
    "B": {
        "ULTRASSOM FT 412": {
            "US Abdome e Dinamico das Vias Urinarias": 95,
            "US Abdome Total": 105,
            "US Abdomen Superior": 95,
            "US Abdominal Total Com Elastogr": 105,
            "US Cervical": 95,
            "US Com Doppler Colorido de Arterias Viscera": 170,
            "US Craniana": 95,
            "US da Bolsa Excrotal Com Dopple": 180,
            "US da Mao": 95,
            "US da Tireoide": 95,
            "US da Tireoide Com Doppler": 160,
            "US das Articulacoes": 95,
            "US das Axilas": 95,
            "US das Mamas": 95,
            "US das Mamas Com Doppler": 160,
            "US das Mamas Pediatrico": 95,
            "US das Partes Moles": 95,
            "US de Antebraco": 95,
            "US de Bolsa Escrotal Pediatrico": 95,
            "US de Parede Abdominal": 95,
            "US Dinamico das Vias Urinarias": 95,
            "US do Aparelho Urinario": 95,
            "US do Cotovelo": 95,
            "US do Escroto": 95,
            "US do Joelho": 95,
            "US do Ombro": 95,
            "US do Pe": 95,
            "US do Punho": 95,
            "US do Quadril": 95,
            "US do Tornozelo": 95,
            "Us Doppler Colorido 1 Vaso": 170,
            "Us Doppler Colorido 2 Vasos": 170,
            "US dos Musculos (Partes Moles)": 95,
            "US Globo Ocular": 95,
            "US Inguinal": 95,
            "US Obstetrica": 95,
            "US Obstetrica Com Doppler": 170,
            "US Obstetrica Morfologico": 180,
            "US Obstetrico Com Perfil Biofisico": 121,
            "US Obstetrico Com Translucencia Nucal": 130,
            "US Obstetrico de Primeiro Trimestre": 95,
            "US Obstetrico Morfologico de 1º": 180,
            "US Pelvico Feminino": 95,
            "US Pélvico Transvaginal": 95,
            "US Prostata Transretal Com Biopsia": 410,
            "US Prostata Via Abdominal": 95,
            "US Superficial da Coxa": 95,
            "US Superficial da Perna": 95,
            "US Superficial do Braco": 95,
            "US Superficial do Pescoço": 95,
            "US Transvaginal C/ Preparo Intestinal": 95
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "M.A.P.A.": {
            "MAPA 24 Horas": 110
            // Adicione mais exames para o Equipamento2 e o rating A conforme necessário
          },
          "ECG": {
            "ECG - Eletrocardiograma Convencional": 35
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "Holter": {
            "Holter 24 Horas - 2 Ou Mais Canais": 110
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
    },
    "C": {
        "ULTRASSOM FT 412":{
            "US Abdome e Dinamico das Vias Urinarias": 100,
    "US Abdome Total": 115,
    "US Abdomen Superior": 100,
    "US Abdominal Total Com Elastogr": 115,
    "US Cervical": 100,
    "US Com Doppler Colorido de Arterias Viscera": 180,
    "US Craniana": 100,
    "US da Bolsa Excrotal Com Dopple": 195,
    "US da Mao": 100,
    "US da Tireoide": 100,
    "US da Tireoide Com Doppler": 170,
    "US das Articulacoes": 100,
    "US das Axilas": 100,
    "US das Mamas": 100,
    "US das Mamas Com Doppler": 170,
    "US das Mamas Pediatrico": 100,
    "US das Partes Moles": 100,
    "US de Antebraco": 100,
    "US de Bolsa Escrotal Pediatrico": 100,
    "US de Parede Abdominal": 100,
    "US Dinamico das Vias Urinarias": 100,
    "US do Aparelho Urinario": 100,
    "US do Cotovelo": 100,
    "US do Escroto": 100,
    "US do Joelho": 100,
    "US do Ombro": 100,
    "US do Pe": 100,
    "US do Punho": 100,
    "US do Quadril": 100,
    "US do Tornozelo": 100,
    "Us Doppler Colorido 1 Vaso": 180,
    "Us Doppler Colorido 2 Vasos": 180,
    "US dos Musculos (Partes Moles)": 100,
    "US Globo Ocular": 100,
    "US Inguinal": 100,
    "US Obstetrica": 100,
    "US Obstetrica Com Doppler": 180,
    "US Obstetrica Morfologico": 195,
    "US Obstetrico Com Perfil Biofisico": 130,
    "US Obstetrico Com Translucencia Nucal": 140,
    "US Obstetrico de Primeiro Trimestre": 100,
    "US Obstetrico Morfologico de 1º": 195,
    "US Pelvico Feminino": 100,
    "US Pélvico Transvaginal": 100,
    "US Prostata Transretal Com Biopsia": 440,
    "US Prostata Via Abdominal": 100,
    "US Superficial da Coxa": 100,
    "US Superficial da Perna": 100,
    "US Superficial do Braco": 100,
    "US Superficial do Pescoço": 100,
    "US Transvaginal C/ Preparo Intestinal": 100
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "M.A.P.A.": {
            "MAPA 24 Horas ": 120
            // Adicione mais exames para o Equipamento2 e o rating A conforme necessário
          },
          "ECG": {
            "ECG - Eletrocardiograma Convencional": 38
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
          "Holter": {
            "Holter 24 Horas - 2 Ou Mais Canais": 120
            // Adicione mais exames para o Equipamento1 e o rating A conforme necessário
          },
    },
    // Adicione mais ratings conforme necessário
  };
  //console.log(document.getElementsByClassName("titulo"));
  //document.getElementsByClassName("titulo").style.visibility = 'hidden';
var count = 1;
  
  // Função para calcular o preço do exame com base no rating, equipamento e nome do exame selecionados
  function calcularPreco() {
	var precoExameNovo = 0;
	var DivisaovalorExameTotal = 0;
    //const selectsExames = document.querySelectorAll('#novoDropdownExame select');

    var valorExameTotal = 0; // Definir o valor inicial como zero

    const ratingSelecionado = document.getElementById("dropdownRating").value;
    const equipamentoSelecionado = document.getElementById("dropdownEquipamento").value;
    const exameSelecionado = document.getElementById("dropdownExame").value;

    // Calcular o preço do exame original
    const precoExame = precosExames[ratingSelecionado][equipamentoSelecionado][exameSelecionado];
    console.log("Preço Exame", precoExame);

    // Definir os valores dos preços dos equipamentos conforme necessário
    let valorEquipamento;

    if (equipamentoSelecionado === "ECG") {
        valorEquipamento = 6200;
        console.log(valorEquipamento);
    } else if (equipamentoSelecionado === "ULTRASSOM FT 412") {
        valorEquipamento = 52615;
    } else if (equipamentoSelecionado === "M.A.P.A.") {
        valorEquipamento = 11790;
    } else if (equipamentoSelecionado === "Holter") {
        valorEquipamento = 6400;
    }

    valorExameTotal += precoExame; // Adicionar o preço do exame original ao total

	// Iterar sobre os novos selects de exame adicionados
    const selectsExames = document.querySelectorAll('#novoDropdownExame');
    selectsExames.forEach((selectExame) => {
		
        const exameSelecionadoNovo = selectExame.value;
        const precoExameNovo = precosExames[ratingSelecionado][equipamentoSelecionado][exameSelecionadoNovo];

        console.log("Preço exame*****", precoExameNovo);

        if (!isNaN(precoExameNovo)) {
            valorExameTotal += precoExameNovo;
			
        }
		
    });
	DivisaovalorExameTotal = valorExameTotal / count;
	
    console.log(precosExames[ratingSelecionado][equipamentoSelecionado]);
    //document.getElementById("precoExame").textContent = valorExameTotal ? `R$${valorExameTotal}` : 'Preço não encontrado';
    document.getElementById("precoExame").textContent = DivisaovalorExameTotal ? `R$${DivisaovalorExameTotal}` : 'Preço não encontrado';
	document.getElementById("valorEquipamento").textContent = `R$${valorEquipamento}`;

    // Obtenção dos valores dos campos de entrada
    const rating = parseFloat(document.getElementById('Rating').value) || 0;
    const valorEquipamento2 = parseFloat(document.getElementById('ValorEquipamento').value) || valorEquipamento;
    const valorExame = parseFloat(document.getElementById('ValorExame').value) || DivisaovalorExameTotal;
    console.log("ValorExame", valorExame);
    const qtdExames = parseFloat(document.getElementById('QtdExames').value) || 0;
    const porcentoRepasseParceiro = parseFloat(document.getElementById('PorcentoRepasseParceiro').value) || 0;
  
    // Cálculos
    const valorTotal = (qtdExames * valorExame);
    const porcentoRepasseClinica = (100 - porcentoRepasseParceiro) / 100;
    const repasseParceiro = (porcentoRepasseParceiro / 100) * valorTotal;
    const repasseClinica = (porcentoRepasseClinica) * valorTotal;
    const royalties = 0.04 * valorTotal;
    const impostos = 0.12 * valorTotal;
    const lucroLiquido = valorTotal - repasseParceiro - royalties - impostos;
    const valorFaltante = valorEquipamento2 - lucroLiquido;
    const mesesQuitar = valorEquipamento2 / lucroLiquido;
    var mesesQuitar1 = Math.round(mesesQuitar);
    mesesQuitar1 += 1;
	const repasseClinicaNormalizado = porcentoRepasseClinica*100;
  
    // Exibição dos resultados nos campos de texto
    document.getElementById('ValorTotal').value = valorTotal.toFixed(2);
    document.getElementById('PorcentoRepasseClinica').value = repasseClinicaNormalizado.toFixed(0) + '%';
    document.getElementById('RepasseParceiro').value = repasseParceiro.toFixed(2);
    document.getElementById('RepasseClinica').value = repasseClinica.toFixed(2);
    document.getElementById('Royalties').value = royalties.toFixed(2);
    document.getElementById('Impostos').value = impostos.toFixed(2);
    document.getElementById('LucroLiquido').value = lucroLiquido.toFixed(2);
    document.getElementById('ValorFaltante').value = valorFaltante.toFixed(2);
    document.getElementById('MesesQuitar').value = isNaN(mesesQuitar1) ? '' : mesesQuitar1.toFixed(0);

	document.getElementById("Titulo1").style.visibility = 'visible';
	document.getElementById("Titulo2").style.visibility = 'visible';
  }
  
  function addExame(){

    const selectExistente = document.getElementById('dropdownExame');
    // Cria uma cópia do select existente
    const novoSelect = selectExistente.cloneNode(true);
    // Modifica o ID do novo select para evitar IDs duplicados
    novoSelect.setAttribute('id', 'novoDropdownExame');
    // Adiciona o novo select na área designada no HTML
    const areaSelect = document.getElementById('novoSelect');
    areaSelect.appendChild(novoSelect);
	count += 1; 

	}

  function minusExame(){
    const selectExistente = document.getElementById('novoDropdownExame');
    selectExistente.remove();


  }